@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Colors (HSL channels) */
    --bg: 222 35% 6%;
    --bg2: 224 40% 4%;
    --card: 223 28% 10%;
    --card2: 223 24% 12%;
    --border: 223 18% 18%;
    --fg: 220 25% 96%;
    --muted: 220 10% 72%;
    --muted2: 220 9% 56%;

    /* Brand + status */
    --accent: 168 88% 52%;
    --accent2: 282 82% 68%;
    --danger: 0 80% 62%;
    --warn: 40 95% 58%;
    --success: 152 70% 44%;
  }

  html,
  body {
    height: 100%;
  }

  body {
    font-family: var(--font-sans), system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    background:
      radial-gradient(900px 520px at 12% -5%, hsl(var(--accent) / 0.16), transparent 65%),
      radial-gradient(820px 520px at 88% 0%, hsl(var(--accent2) / 0.14), transparent 60%),
      linear-gradient(to bottom, hsl(var(--bg2)), hsl(var(--bg)));
    background-color: hsl(var(--bg));
    color: hsl(var(--fg));
  }

  body::before {
    content: "";
    position: fixed;
    inset: 0;
    pointer-events: none;
    background-image:
      linear-gradient(to right, hsl(var(--border) / 0.08) 1px, transparent 1px),
      linear-gradient(to bottom, hsl(var(--border) / 0.08) 1px, transparent 1px),
      linear-gradient(to right, hsl(var(--border) / 0.13) 1px, transparent 1px),
      linear-gradient(to bottom, hsl(var(--border) / 0.13) 1px, transparent 1px);
    background-size: 28px 28px, 28px 28px, 140px 140px, 140px 140px;
    opacity: 0.38;
    mix-blend-mode: screen;
  }

  ::selection {
    background: hsl(var(--accent) / 0.25);
  }
}

@layer components {
  .mb-panel {
    @apply relative overflow-hidden rounded-3xl bg-card/60 shadow-soft ring-1 ring-border;
  }

  .mb-panel::before {
    content: "";
    position: absolute;
    inset: -1px;
    pointer-events: none;
    background:
      radial-gradient(520px 260px at 0% 0%, hsl(var(--accent) / 0.18), transparent 62%),
      radial-gradient(640px 300px at 100% 0%, hsl(var(--accent2) / 0.16), transparent 58%),
      linear-gradient(to bottom, hsl(var(--card2) / 0.60), transparent 60%);
  }

  .mb-panel-inner {
    @apply relative;
  }

  .mb-subpanel {
    @apply rounded-2xl bg-bg/40 ring-1 ring-border/70;
  }

  .mb-badge {
    @apply inline-flex items-center gap-2 rounded-full bg-bg/60 px-3 py-1 text-xs font-medium text-muted ring-1 ring-border/80;
  }

  .mb-dot {
    @apply h-1.5 w-1.5 rounded-full bg-accent shadow-[0_0_0_3px_hsl(var(--accent)_/_0.18)];
  }

  .mb-field {
    @apply w-full rounded-xl border border-border bg-bg/40 px-3 text-sm text-fg shadow-[inset_0_1px_0_hsl(0_0%_100%_/_0.06)] outline-none transition;
  }

  .mb-field:focus-visible {
    border-color: hsl(var(--accent) / 0.55);
    box-shadow:
      0 0 0 4px hsl(var(--accent) / 0.18),
      inset 0 1px 0 hsl(0 0% 100% / 0.06);
  }

  .mb-btn {
    @apply inline-flex items-center justify-center gap-2 rounded-xl px-4 py-2 text-sm font-semibold text-fg transition focus-visible:outline-none;
  }

  .mb-btn:focus-visible {
    box-shadow: 0 0 0 4px hsl(var(--accent) / 0.18);
  }

  .mb-btn:active {
    transform: translateY(1px);
  }

  .mb-btn-primary {
    @apply bg-accent/20 ring-1 ring-accent/40 hover:bg-accent/25;
  }

  .mb-btn-ghost {
    @apply bg-bg/30 ring-1 ring-border/80 hover:bg-bg/50;
  }

  .mb-btn-danger {
    @apply bg-danger/20 ring-1 ring-danger/40 hover:bg-danger/25;
  }

  .mb-kbd {
    @apply rounded-md border border-border/80 bg-bg/50 px-1.5 py-0.5 font-mono text-[11px] text-muted;
  }
}
